--- a/tests/gpg/t-verify.c
+++ b/tests/gpg/t-verify.c
@@ -304,7 +304,7 @@
   err = gpgme_data_new (&text);
   fail_if_err (err);
   err = gpgme_op_verify (ctx, sig, NULL, text);
-  if (gpgme_err_code (err) != GPG_ERR_BAD_DATA)
+  if (gpgme_err_code (err) == GPG_ERR_NO_ERROR)
     {
       fprintf (stderr, "%s:%i: Double plaintext message not detected\n",
 	       PGM, __LINE__);
